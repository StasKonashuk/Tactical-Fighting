var Z=Object.defineProperty;var ee=(n,e,t)=>e in n?Z(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var g=(n,e,t)=>(ee(n,typeof e!="symbol"?e+"":e,t),t);import{j,c as T,r as f,R as te,a as ne}from"./vendor.bb5f2d61.js";const ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};ae();const ie="_imgContainer_1ow4p_1",se="_unitImage_1ow4p_5",oe="_orderImage_1ow4p_11",re="_topTeam_1ow4p_17",le="_bottomTeam_1ow4p_21",ce="_gameRoundValue_1ow4p_25";var l={imgContainer:ie,unitImage:se,orderImage:oe,topTeam:re,bottomTeam:le,gameRoundValue:ce};const r=j.exports.jsx,d=j.exports.jsxs,me=j.exports.Fragment,ge=({isOrder:n,unitTeam:e,gameRound:t})=>d("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"skeleton",src:"https://cs11.pikabu.ru/post_img/big/2019/03/04/6/155168814814266646.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),he=({isOrder:n,unitTeam:e,gameRound:t})=>d("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"bandit",src:"https://i.pinimg.com/originals/b6/14/8d/b6148ddb37e13c6d2a04c8371a77de58.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),de=({isOrder:n,unitTeam:e,gameRound:t})=>d("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"archimage",src:"https://i.pinimg.com/564x/e0/05/d1/e005d10d84f65caec46b87df7f52d331.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),ue=({isOrder:n,unitTeam:e,gameRound:t})=>d("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"bishop",src:"https://www.worldanvil.com/uploads/images/1ebd51cff77cbb5abae496965ec93d5a.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),fe=({isOrder:n,unitTeam:e,gameRound:t})=>d("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"centaur",src:"https://i.pinimg.com/originals/de/1d/d5/de1dd5f4e9049013e13f05621274b0c4.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),pe=({isOrder:n,unitTeam:e,gameRound:t})=>d("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"elf-archer",src:"https://i.pinimg.com/originals/31/ab/d4/31abd45b0fa076583bd9ab792fb28a10.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),Te=({isOrder:n,unitTeam:e,gameRound:t})=>d("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"monk",src:"https://i.redd.it/8odq4oshflq11.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),Ie=({isOrder:n,unitTeam:e,gameRound:t})=>d("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"sirena",src:"https://wallbox.ru/resize/1280x800/wallpapers/main2/201728/149967824159634621cde475.41299501.png",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),_e=({isOrder:n,unitTeam:e,gameRound:t})=>d("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"skeleton-mage",src:"https://cs10.pikabu.ru/post_img/big/2019/07/18/7/1563447298187165551.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),xe={SkeletonImage:ge,BanditImage:he,ArchimageImage:de,BishopImage:ue,CentaurImage:fe,ElfArcherImage:pe,MonkImage:Te,SirenaImage:Ie,SkeletonMageImage:_e},Ue="_unitImageContainer_1jszp_1",be="_statusContainer_1jszp_8",ve="_unitStatus_1jszp_12";var M={unitImageContainer:Ue,statusContainer:be,unitStatus:ve};const z=({isParalyzing:n,name:e,isDead:t,isDefending:a,isOrder:i,unitTeam:o,gameRound:s})=>{const m=e.split(" ").join(""),c=xe[`${m}Image`];return d("div",{className:"unit-image-container",children:[r(c,{gameRound:s,unitTeam:o,isOrder:i}),a&&!t&&r("div",{className:M.statusContainer,children:r("img",{alt:"defending",src:"https://cdn-icons-png.flaticon.com/512/81/81137.png",className:M.unitStatus})}),n&&!t&&r("div",{className:M.statusContainer,children:r("img",{alt:"paralyzing",src:"https://img.icons8.com/external-justicon-lineal-justicon/100/26e07f/external-storm-weather-justicon-lineal-justicon.png",className:M.unitStatus})}),t&&r("div",{children:r("img",{alt:"dead",src:"https://cdn4.iconfinder.com/data/icons/game-general-icon-set-1/512/skull-512.png",className:M.unitStatus})})]})},Ce="_unitHealthContainer_132rz_1",we="_healthValue_132rz_21",Ne="_healthPointContainer_132rz_33";var k={unitHealthContainer:Ce,healthValue:we,healthPointContainer:Ne};const ye=({hp:n,isDead:e,startHp:t})=>d("div",{className:k.unitHealthContainer,children:[!e&&r("div",{style:{minHeight:"0px",height:`${255-n*255/t}px`},className:k.healthPointContainer}),r("div",{className:k.unitHealthContainer,children:r("img",{src:"https://img.icons8.com/glyph-neue/100/fa314a/like.png",alt:"hp"})}),r("span",{className:k.healthValue,children:n})]});class x{deal(e,t,a){const i=[];return t.forEach(o=>{const s=a.getUnitByLocation(o);if(s){const m=s.getIsDefending()?s.getHealth()-.5*e.getDamageValue():s.getHealth()-e.getDamageValue();s.setHealth(m),i.push(s)}}),i}}class L{deal(e,t,a){const i=[];return t.forEach(o=>{const s=a.getUnitByLocation(o);if(s){const m=s.getHealth()+e.getDamageValue()>s.getMaxHealth()?s.getMaxHealth():s.getHealth()+e.getDamageValue();s.setHealth(m),i.push(s)}}),i}}class R{deal(e,t,a){const i=[];return t.forEach(o=>{const s=a.getUnitByLocation(o);s&&(s.setInitiative(0),s.setIsParalyzed(!0),s.setIsDefending(!1),i.push(s))}),i}}const Me="_unitDamageContainer_mnxoj_1",Ae="_damageIcon_mnxoj_4",Be="_damageValue_mnxoj_11",Ee="_healIcon_mnxoj_21",ke="_healValue_mnxoj_28",Le="_paralizeIcon_mnxoj_38";var w={unitDamageContainer:Me,damageIcon:Ae,damageValue:Be,healIcon:Ee,healValue:ke,paralizeIcon:Le};const P=n=>n instanceof x?"damage":n instanceof L?"heal":n instanceof R?"paralyze":"damage",Oe=({damageValue:n,unitDamageType:e})=>r("div",{className:w.unitDamageContainer,children:P(e)==="damage"?d("div",{children:[r("img",{src:"https://img.icons8.com/external-neu-royyan-wijaya/32/26e07f/external-attack-neu-game-neu-royyan-wijaya.png",alt:"value",className:w.damageIcon}),r("span",{className:w.damageValue,children:n})]}):P(e)==="heal"?d("div",{children:[r("img",{src:"https://img.icons8.com/ios/50/26e07f/bandage.png",alt:"value",className:w.healIcon}),r("span",{className:w.healValue,children:n})]}):P(e)==="paralyze"?r("div",{children:r("img",{src:"https://img.icons8.com/fluency-systems-regular/48/000000/lightning-bolt.png",alt:"value",className:w.paralizeIcon})}):null}),Se="_userInfoContainer_1xmig_1",je="_unitName_1xmig_11";var G={userInfoContainer:Se,unitName:je};const Pe=({hp:n,startHp:e,name:t,damageValue:a,unitDamageType:i,isDead:o})=>d("div",{className:G.userInfoContainer,children:[r(Oe,{damageValue:a,unitDamageType:i}),r("span",{className:G.unitName,children:t}),r(ye,{isDead:o,hp:n,startHp:e})]}),De="_unitItem_x4b7w_1",Ve="_current_x4b7w_9",He="_target_x4b7w_18";var A={unitItem:De,current:Ve,target:He};const ze=({unit:n,isDead:e,isDefending:t,isParalyzing:a,isCurrent:i,isTarget:o,unitTeam:s,handleSelectTarget:m})=>d("div",{onClick:()=>m(n),className:T(A.unitItem,{[A.current]:i,[A.target]:o,[A.topTeam]:s==="TOP_TEAM",[A.bottomTeam]:s==="BOTTOM_TEAM"}),children:[r(z,{unitTeam:s,gameRound:1,name:n.getName(),isOrder:!1,isDead:e,isParalyzing:a,isDefending:t}),r(Pe,{isDead:e,name:n.getName(),hp:n.getHealth(),startHp:n.getMaxHealth(),damageValue:n.getDamageValue(),unitDamageType:n.getUnitType()})]}),Re="_boardContainer_1w2iu_1",Ge="_boardRow_1w2iu_8";var $={boardContainer:Re,boardRow:Ge};const $e=({initialUnits:n,units:e,currentUnit:t,toSelectTarget:a,action:i,handleSelectTarget:o})=>{const[s,m]=f.exports.useState();return f.exports.useEffect(()=>{t&&m(i.getPossibleTargetsOfUnit(t))},[t]),r("div",{className:$.boardContainer,children:n.map((c,u)=>r("div",{className:$.boardRow,children:c.map((h,b)=>r(ze,{unitTeam:u>Math.floor(c.length/2)?"BOTTOM_TEAM":"TOP_TEAM",unit:h,isDead:Boolean(!e[u][b]),isDefending:Boolean(h==null?void 0:h.getIsDefending()),isParalyzing:Boolean(h==null?void 0:h.getIsParalyzed()),isCurrent:h===t,isTarget:a&&(s==null?void 0:s.findIndex(_=>_===e[u][b]))!==-1,handleSelectTarget:o},b))},u))})};class O{getPossibleTargets(e,t){const a=t.getEnemiesLocation(e);if(a.length)return a;const i=t.getTeamOfUnits(e);if(i&&i===t.getTeamOfNextLine(e))return[];const o=t.getNearestEnemiesLocation(e);return o||[]}}class U{getTargets(e,t){return t&&e.findIndex(a=>a.rowIndex===t.rowIndex&&a.columnIndex===t.columnIndex)!==-1?[t]:[]}}class I{constructor(e,t,a,i,o,s,m){g(this,"name");g(this,"health");g(this,"maxHealth");g(this,"damageValue");g(this,"initiative");g(this,"originInitiative");g(this,"isDefending");g(this,"isParalyzed");g(this,"unitType");g(this,"attackRangeType");g(this,"damageCount");this.name=e||"",this.health=t||0,this.maxHealth=t||0,this.damageValue=a||0,this.initiative=i||0,this.originInitiative=i||0,this.isDefending=!1,this.isParalyzed=!1,this.unitType=o||new x,this.attackRangeType=s||new O,this.damageCount=m||new U}getPossibleTargets(e,t){return this.attackRangeType.getPossibleTargets(e,t)}getTargets(e,t,a){return this.damageCount.getTargets(this.getPossibleTargets(e,t),a)}deal(e,t,a=void 0){return this.unitType.deal(this,this.getTargets(e,t,a),t)}getName(){return this.name}getHealth(){return this.health}getMaxHealth(){return this.maxHealth}getDamageValue(){return this.damageValue}getInitiative(){return this.initiative}getOriginInitiative(){return this.originInitiative}getIsDefending(){return this.isDefending}getIsParalyzed(){return this.isParalyzed}getUnitType(){return this.unitType}getDamageCount(){return this.damageCount}setHealth(e){this.health=e}setInitiative(e){this.initiative=e}setIsDefending(e){this.isDefending=e}setIsParalyzed(e){this.isParalyzed=e}}class Fe extends I{constructor(){super("Skeleton",100,25,50,new x,new O,new U)}}class qe extends I{constructor(){super("Centaur",150,50,50,new x,new O,new U)}}class We extends I{constructor(){super("Bandit",75,30,60,new x,new O,new U)}}class N{getPossibleTargets(e,t){const a=t.getUnitByLocation(e);return a&&a.getUnitType()instanceof L?t.getAllAlliesLocation(e):t.getAllEnemiesLocation(e)}}class Ke extends I{constructor(){super("Elf Archer",90,45,60,new x,new N,new U)}}class y{getTargets(e){return e}}class Ye extends I{constructor(){super("Skeleton Mage",50,20,40,new x,new N,new y)}}class Je extends I{constructor(){super("Archimage",90,30,40,new x,new N,new y)}}class Qe extends I{constructor(){super("Monk",90,40,20,new L,new N,new U)}}class Xe extends I{constructor(){super("Bishop",130,25,20,new L,new N,new y)}}class Ze extends I{constructor(){super("Sirena",80,0,20,new R,new N,new U)}}class et{constructor(){g(this,"unitList");this.unitList=[Fe,qe,We,Ke,Ye,Je,Qe,Xe,Ze]}shuffleListSequance(e){for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}generateIndex(){return Math.floor(Math.random()*this.unitList.length)}generateUnit(){return new this.unitList[this.generateIndex()]}generateFullBoardUnits(e,t){const a=[];for(let i=0;i<e;i++){const o=[];for(let s=0;s<t;s++)o.push(this.generateUnit());a.push(o)}return a}}class tt{constructor(e,t){g(this,"boardMatrix");const a=Array(t).fill(null);this.boardMatrix=Array(e).fill(a)}getBoardMatrix(){return this.boardMatrix}setUnit(e,t){this.boardMatrix[e.rowIndex][e.columnIndex]=t}fillWithUnits(e){this.boardMatrix=[...e]}}var p;(function(n){n.topTeam="TOP_TEAM",n.bottomTeam="BOTTOM_TEAM"})(p||(p={}));var C;(function(n){n.attack="ATTACK",n.defense="DEFFENSE"})(C||(C={}));class nt{constructor(e){g(this,"board");this.board=e}getUnitCardLocation(e){let t=0,a=0,i=!1;return this.board.getBoardMatrix().every(o=>{const s=o.findIndex(m=>m===e);if(s===-1)t+=1;else return i=!0,a=s,!1;return!0}),i?{rowIndex:t,columnIndex:a}:null}getUnitByLocation(e){return e?this.board.getBoardMatrix()[e.rowIndex][e.columnIndex]:null}isAlive(e){return Boolean(this.board.getBoardMatrix()[e.rowIndex][e.columnIndex])}removeDeadUnits(e){return e!=null}getTeamOfUnits(e){if(e)return e.rowIndex<Math.floor(this.board.getBoardMatrix().length/2)?p.topTeam:p.bottomTeam}getEnemiesLocation(e){const t=this.getTeamOfUnits(e),a=t===p.topTeam?1:-1,i=[],o={rowIndex:e.rowIndex+a,columnIndex:e.columnIndex},s=this.getTeamOfUnits({rowIndex:e.rowIndex+a,columnIndex:e.columnIndex})!==t,m=e.columnIndex-1>=0&&s,c=e.columnIndex+1<this.board.getBoardMatrix().length&&s;s&&this.isAlive(o)&&i.push(o);const u={rowIndex:e.rowIndex+a,columnIndex:e.columnIndex-1},h={rowIndex:e.rowIndex+a,columnIndex:e.columnIndex+1};return s&&m&&this.isAlive(u)&&i.push(u),s&&c&&this.isAlive(h)&&i.push(h),i}getRowEnemiesLocation(e){return this.board.getBoardMatrix()[e].filter(t=>t&&t.getHealth()>0).map(t=>{const a=this.getUnitCardLocation(t);return a||null})}getTeamOfNextLine(e){const a=this.getTeamOfUnits(e)===p.topTeam?1:-1;return this.getRowEnemiesLocation(e.rowIndex+a).length===0?null:this.getTeamOfUnits({rowIndex:e.rowIndex+a,columnIndex:e.columnIndex})}getNearestEnemiesLocation(e){const t=this.board.getBoardMatrix(),a=this.getTeamOfUnits(e),i=Math.floor(t.length/2);if(a===p.bottomTeam){for(let o=i-1;o>=0;o-=1)if(t[o].filter(s=>s).length)return this.getRowEnemiesLocation(o).filter(this.removeDeadUnits)}else for(let o=i;o<t.length;o+=1)if(t[o].filter(s=>s).length)return this.getRowEnemiesLocation(o).filter(this.removeDeadUnits);return null}switchTeam(e){return e===p.bottomTeam?p.topTeam:p.bottomTeam}getAllTeamUnits(e,t=!1){const a=this.board.getBoardMatrix(),i=this.getTeamOfUnits(e),o=t?this.switchTeam(i):i,s=Math.floor(a.length/2),m=[];if(o===p.bottomTeam){for(let c=s-1;c>=0;c-=1)for(let u=0;u<a[c].length;u+=1)if(a[c][u]){const h=this.getUnitCardLocation(a[c][u]);h&&m.push(h)}}else for(let c=s;c<a.length;c+=1)for(let u=0;u<a[c].length;u+=1)if(a[c][u]){const h=this.getUnitCardLocation(a[c][u]);h&&m.push(h)}return m}getAllEnemiesLocation(e){return this.getAllTeamUnits(e)}getAllAlliesLocation(e){return this.getAllTeamUnits(e,!0)}}class at{constructor(e,t,a){g(this,"location");g(this,"board");g(this,"unitGenerator");this.location=e,this.board=t,this.unitGenerator=a}doAction(e,t,a){switch(e){case C.attack:const i=this.deal(t);!(t.getDamageCount()instanceof y)&&i&&a&&i(a),this.unitGenerator.next();break;case C.defense:this.defense(t),this.unitGenerator.next();break;default:throw new Error("There is no such an action")}}killUnit(e){this.board.setUnit(e,null)}checkAndRemoveDeadUnits(e){e.forEach(t=>{const a=this.location.getUnitByLocation(t);a&&a.getHealth()<=0&&this.killUnit(t)})}attackSingleTarget(e,t){const a=this.location.getUnitCardLocation(e);a&&e.deal(a,this.location,t)}attackAllTargets(e){const t=this.location.getUnitCardLocation(e);e.deal(t,this.location)}deal(e){const t=this.location.getUnitCardLocation(e);if(t&&e.getDamageCount()instanceof U)return a=>{this.attackSingleTarget(e,a),this.checkAndRemoveDeadUnits(this.location.getAllEnemiesLocation(this.location.getUnitCardLocation(e)))};t&&e.getDamageCount()instanceof y&&(this.attackAllTargets(e),this.checkAndRemoveDeadUnits(this.location.getAllEnemiesLocation(this.location.getUnitCardLocation(e))))}defense(e){e.setIsDefending(!0)}getPossibleTargetsOfUnit(e){return e.getPossibleTargets(this.location.getUnitCardLocation(e),this.location).map(t=>this.location.getUnitByLocation(t))}getBoardLocationOfTarget(e){return this.location.getUnitCardLocation(e)}getTeamOfUnit(e){return this.location.getTeamOfUnits(this.location.getUnitCardLocation(e))}}class it{constructor(e,t){g(this,"unitList");g(this,"unitGenerator");g(this,"currentUnit");g(this,"round");this.unitList=this.splitByEqualInitiative(e.filter(a=>a)).reduce((a,i)=>[...a,...t.shuffleListSequance(i)]),this.unitGenerator=this.generator(),this.round=1,this.currentUnit=this.unitList[0]}*generator(){for(;;)yield*this.unitList,this.round+=1}skipCurrentUnit(){return!this.currentUnit||this.currentUnit.getHealth()<=0||this.currentUnit.getInitiative()<=0}getFilterCondition(e){return e&&e.getHealth()>0&&e.getInitiative()>0}next(){var e;for(this.currentUnit=this.unitGenerator.next().value;((e=this.currentUnit)==null?void 0:e.getInitiative())<=0;)this.clearCurrentUnitParalyzation(),this.currentUnit=this.unitGenerator.next().value;for(;this.skipCurrentUnit();)this.currentUnit=this.unitGenerator.next().value;return this.currentUnit===this.unitList.filter(this.getFilterCondition)[0]&&this.removeDefending(),this.currentUnit}getUnitList(){return this.unitList.filter(e=>this.getFilterCondition(e))}getCurrentUnit(){return this.currentUnit}splitByEqualInitiative(e){const t=this.sortByInitiativeUnitsList(e),a=[];let i=[];for(let o=t.length-1;o>=0;o-=1)o!==t.length-1&&t[o].getInitiative()!==t[o+1].getInitiative()&&(a.push(i),i=[]),i.push(t[o]),o===0&&a.push(i);return a}clearCurrentUnitParalyzation(){this.currentUnit.setInitiative(this.currentUnit.getOriginInitiative()),this.currentUnit.setIsParalyzed(!1)}removeDefending(){this.unitList.filter(e=>e&&e.getHealth()>0).forEach(e=>{e.setIsDefending(!1)})}sortByInitiativeUnitsList(e){const t=[];return e.forEach(a=>{a.forEach(i=>{t.push(i)})}),t.sort((a,i)=>a.getInitiative()-i.getInitiative())}getGameRound(){return this.round}}class B{static start(e,t){const a=new et,i=new tt(e,t);i.fillWithUnits(a.generateFullBoardUnits(e,t)),this.location=new nt(i);const o=i.getBoardMatrix();this.unitGenerator=new it(o,a);const s=new at(this.location,i,this.unitGenerator);return{units:o,unitGenerator:this.unitGenerator,action:s}}static finish(e){return{isFinished:!this.location.getAllEnemiesLocation(this.location.getUnitCardLocation(e)).some(t=>this.location.isAlive(t)),currentTeam:this.location.getTeamOfUnits(this.location.getUnitCardLocation(e))}}}g(B,"location"),g(B,"unitGenerator");const st="_gameOverContainer_1j0t4_1",ot="_bottomTeam_1j0t4_53",rt="_topTeam_1j0t4_61";var D={gameOverContainer:st,bottomTeam:ot,topTeam:rt};const lt=({currentTeam:n,handleNewGame:e})=>d("div",{className:D.gameOverContainer,children:[r("span",{children:"Game Over"}),d("span",{children:["The winner is"," ",r("span",{className:T({[D.bottomTeam]:n===p.bottomTeam,[D.topTeam]:n===p.topTeam}),children:n===p.bottomTeam?"Bottom team":"Top team"})]}),r("button",{type:"button",onClick:()=>e(),children:"New game"})]}),ct="_orderContainer_bekev_1",mt="_orderItem_bekev_14";var F={orderContainer:ct,orderItem:mt};const gt=4,ht=3,dt=3,ut=({gameRound:n,action:e,currentUnit:t,unitSequence:a})=>{const[i,o]=f.exports.useState(a);return f.exports.useEffect(()=>{const s=a.findIndex(m=>m===t);s!==-1&&o([a[s],...[...a.slice(s+1),...a.slice(0,s)].slice(0,dt+1)])},[t]),r("div",{className:F.orderContainer,children:i.map((s,m)=>r("div",{className:F.orderItem,children:r(z,{gameRound:n,unitTeam:e.getTeamOfUnit(s),isOrder:!0,name:s.getName()})},m))})},ft="_turnControllerContainer_1q3tj_1",pt="_attackButton_1q3tj_7",Tt="_damageIcon_1q3tj_24",It="_defenseButton_1q3tj_30";var E={turnControllerContainer:ft,attackButton:pt,damageIcon:Tt,defenseButton:It};const _t=({toSelectTarget:n,setToSelectTarget:e,handleDefense:t,handleAttack:a})=>d("div",{className:E.turnControllerContainer,children:[d("button",{onClick:()=>a(),className:E.attackButton,type:"button",children:["Attack",r("img",{className:E.damageIcon,src:"https://img.icons8.com/external-flat-icons-inmotus-design/67/fa314a/external-ancien-ancient-rome-flat-icons-inmotus-design.png",alt:"damage"})]}),d("button",{className:E.defenseButton,onClick:()=>t(),type:"button",children:["Defense",r("img",{className:E.damageIcon,src:"https://img.icons8.com/external-icongeek26-flat-icongeek26/64/fa314a/external-weapons-museum-icongeek26-flat-icongeek26.png",alt:"defense"})]})]}),xt="_sideBarContainer_j1qk0_1";var Ut={sideBarContainer:xt};const bt=({action:n,toSelectTarget:e,setToSelectTarget:t,currentUnit:a,unitGenerator:i,handleDefense:o,handleAttack:s,gameRound:m})=>a?d("div",{className:Ut.sideBarContainer,children:[r(ut,{gameRound:m,action:n,currentUnit:a,unitSequence:i.getUnitList().filter(c=>c)}),r(_t,{toSelectTarget:e,setToSelectTarget:t,handleDefense:o,handleAttack:s})]}):null,vt="_appContainer_90v0z_1";var Ct={appContainer:vt};let q;function wt(){const[n,e]=f.exports.useState(),[t,a]=f.exports.useState(),[i,o]=f.exports.useState(),[s,m]=f.exports.useState(!1),[c,u]=f.exports.useState(),[h,b]=f.exports.useState(1),[_,V]=f.exports.useState(),[H,W]=f.exports.useState(!1);function K(){W(!H),V(B.finish(c))}function Y(v){if(c&&(i==null?void 0:i.getPossibleTargetsOfUnit(c).findIndex(X=>X===v))===-1)return;const S=i==null?void 0:i.getBoardLocationOfTarget(v);i==null||i.doAction(C.attack,c,S),m(!1),b(h+1)}function J(){m(!s),(c==null?void 0:c.getDamageCount())instanceof y&&(i==null||i.doAction(C.attack,c),m(!1),b(h+1))}function Q(){i==null||i.doAction(C.defense,c),b(h+1),m(!1)}return f.exports.useEffect(()=>{const v=B.start(gt,ht);e(v.units),a(v.unitGenerator),o(v.action),q=[...v.units.map(S=>[...S])]},[H]),f.exports.useEffect(()=>{u(t==null?void 0:t.next())},[t]),f.exports.useEffect(()=>{c&&V(B.finish(c)),u(t==null?void 0:t.getCurrentUnit())},[h]),n?r("div",{className:Ct.appContainer,children:(_==null?void 0:_.isFinished)?r(lt,{currentTeam:_==null?void 0:_.currentTeam,handleNewGame:K}):d(me,{children:[r($e,{units:n,initialUnits:q,toSelectTarget:s,handleSelectTarget:Y,currentUnit:c,action:i}),r(bt,{action:i,unitGenerator:t,toSelectTarget:s,setToSelectTarget:m,currentUnit:c,handleDefense:Q,handleAttack:J,gameRound:t==null?void 0:t.getGameRound()})]})}):r("div",{children:"Loading"})}te.render(r(ne.StrictMode,{children:r(wt,{})}),document.getElementById("root"));
