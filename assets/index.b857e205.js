var Z=Object.defineProperty;var ee=(n,e,t)=>e in n?Z(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var g=(n,e,t)=>(ee(n,typeof e!="symbol"?e+"":e,t),t);import{j as S,c as T,r as f,R as te,a as ne}from"./vendor.bb5f2d61.js";const ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};ae();const ie="_imgContainer_9unq1_1",se="_unitImage_9unq1_9",oe="_orderImage_9unq1_21",re="_topTeam_9unq1_33",le="_bottomTeam_9unq1_41",ce="_gameRoundValue_9unq1_49";var l={imgContainer:ie,unitImage:se,orderImage:oe,topTeam:re,bottomTeam:le,gameRoundValue:ce};const r=S.exports.jsx,u=S.exports.jsxs,me=S.exports.Fragment,ge=({isOrder:n,unitTeam:e,gameRound:t})=>u("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"skeleton",src:"https://cs11.pikabu.ru/post_img/big/2019/03/04/6/155168814814266646.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),he=({isOrder:n,unitTeam:e,gameRound:t})=>u("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"bandit",src:"https://i.pinimg.com/originals/b6/14/8d/b6148ddb37e13c6d2a04c8371a77de58.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),ue=({isOrder:n,unitTeam:e,gameRound:t})=>u("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"archimage",src:"https://i.pinimg.com/564x/e0/05/d1/e005d10d84f65caec46b87df7f52d331.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),de=({isOrder:n,unitTeam:e,gameRound:t})=>u("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"bishop",src:"https://www.worldanvil.com/uploads/images/1ebd51cff77cbb5abae496965ec93d5a.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),fe=({isOrder:n,unitTeam:e,gameRound:t})=>u("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"centaur",src:"https://i.pinimg.com/originals/de/1d/d5/de1dd5f4e9049013e13f05621274b0c4.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),pe=({isOrder:n,unitTeam:e,gameRound:t})=>u("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"elf-archer",src:"https://i.pinimg.com/originals/31/ab/d4/31abd45b0fa076583bd9ab792fb28a10.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),Te=({isOrder:n,unitTeam:e,gameRound:t})=>u("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"monk",src:"https://i.redd.it/8odq4oshflq11.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),Ie=({isOrder:n,unitTeam:e,gameRound:t})=>u("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"sirena",src:"https://wallbox.ru/resize/1280x800/wallpapers/main2/201728/149967824159634621cde475.41299501.png",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),_e=({isOrder:n,unitTeam:e,gameRound:t})=>u("div",{className:l.imgContainer,children:[t&&n&&r("span",{className:l.gameRoundValue,children:t}),r("img",{alt:"skeleton-mage",src:"https://cs10.pikabu.ru/post_img/big/2019/07/18/7/1563447298187165551.jpg",className:T(l.unitImage,{[l.orderImage]:n,[l.topTeam]:e==="TOP_TEAM"&&n,[l.bottomTeam]:e==="BOTTOM_TEAM"&&n})})]}),xe={SkeletonImage:ge,BanditImage:he,ArchimageImage:ue,BishopImage:de,CentaurImage:fe,ElfArcherImage:pe,MonkImage:Te,SirenaImage:Ie,SkeletonMageImage:_e},Ue="_unitImageContainer_4af8q_1",be="_statusContainer_4af8q_15",ve="_unitStatus_4af8q_23",Ce="_paralyzeStatus_4af8q_41";var M={unitImageContainer:Ue,statusContainer:be,unitStatus:ve,paralyzeStatus:Ce};const j=({isParalyzing:n,name:e,isDead:t,isDefending:a,isOrder:i,unitTeam:o,gameRound:s})=>{const m=e.split(" ").join(""),c=xe[`${m}Image`];return u("div",{className:"unit-image-container",children:[r(c,{gameRound:s,unitTeam:o,isOrder:i}),a&&!t&&r("div",{className:M.statusContainer,children:r("img",{alt:"defending",src:"https://cdn-icons-png.flaticon.com/512/81/81137.png",className:M.unitStatus})}),n&&!t&&r("div",{className:M.statusContainer,children:r("img",{alt:"paralyzing",src:"https://img.icons8.com/external-justicon-lineal-justicon/100/26e07f/external-storm-weather-justicon-lineal-justicon.png",className:M.unitStatus})}),t&&r("div",{children:r("img",{alt:"dead",src:"https://cdn4.iconfinder.com/data/icons/game-general-icon-set-1/512/skull-512.png",className:M.unitStatus})})]})},ye="_unitHealthContainer_1ak17_1",we="_healthValue_1ak17_25",Ne="_healthPointContainer_1ak17_41";var P={unitHealthContainer:ye,healthValue:we,healthPointContainer:Ne};const Me=({hp:n,isDead:e,startHp:t})=>u("div",{className:P.unitHealthContainer,children:[!e&&r("div",{style:{minHeight:"0px",height:`${255-n*255/t}px`},className:P.healthPointContainer}),r("img",{src:"https://img.icons8.com/glyph-neue/100/fa314a/like.png",alt:"hp"}),r("span",{className:P.healthValue,children:n})]});class x{deal(e,t,a){const i=[];return t.forEach(o=>{const s=a.getUnitByLocation(o);if(s){const m=s.getIsDefending()?s.getHealth()-.5*e.getDamageValue():s.getHealth()-e.getDamageValue();s.setHealth(m),i.push(s)}}),i}}class k{deal(e,t,a){const i=[];return t.forEach(o=>{const s=a.getUnitByLocation(o);if(s){const m=s.getHealth()+e.getDamageValue()>s.getMaxHealth()?s.getMaxHealth():s.getHealth()+e.getDamageValue();s.setHealth(m),i.push(s)}}),i}}class R{deal(e,t,a){const i=[];return t.forEach(o=>{const s=a.getUnitByLocation(o);s&&(s.setInitiative(0),s.setIsParalyzed(!0),s.setIsDefending(!1),i.push(s))}),i}}const Ae="_unitDamageContainer_3x87z_1",Be="_damageIcon_3x87z_7",Ee="_damageValue_3x87z_21",ke="_healIcon_3x87z_39",Le="_healValue_3x87z_49",Oe="_paralizeIcon_3x87z_67";var y={unitDamageContainer:Ae,damageIcon:Be,damageValue:Ee,healIcon:ke,healValue:Le,paralizeIcon:Oe};const z=n=>n instanceof x?"damage":n instanceof k?"heal":n instanceof R?"paralyze":"damage",Se=({damageValue:n,unitDamageType:e})=>r("div",{className:y.unitDamageContainer,children:z(e)==="damage"?u("div",{children:[r("img",{src:"https://img.icons8.com/external-neu-royyan-wijaya/32/26e07f/external-attack-neu-game-neu-royyan-wijaya.png",alt:"value",className:y.damageIcon}),r("span",{className:y.damageValue,children:n})]}):z(e)==="heal"?u("div",{children:[r("img",{src:"https://img.icons8.com/ios/50/26e07f/bandage.png",alt:"value",className:y.healIcon}),r("span",{className:y.healValue,children:n})]}):z(e)==="paralyze"?r("div",{children:r("img",{src:"https://img.icons8.com/fluency-systems-regular/48/000000/lightning-bolt.png",alt:"value",className:y.paralizeIcon})}):null}),Pe="_userInfoContainer_hcsqz_1",ze="_unitName_hcsqz_39";var q={userInfoContainer:Pe,unitName:ze};const De=({hp:n,startHp:e,name:t,damageValue:a,unitDamageType:i,isDead:o})=>u("div",{className:q.userInfoContainer,children:[r(Se,{damageValue:a,unitDamageType:i}),r("span",{className:q.unitName,children:t}),r(Me,{isDead:o,hp:n,startHp:e})]}),Ve="_unitItem_tboye_1",He="_current_tboye_17",je="_target_tboye_35";var A={unitItem:Ve,current:He,target:je};const Re=({unit:n,isDead:e,isDefending:t,isParalyzing:a,isCurrent:i,isTarget:o,unitTeam:s,handleSelectTarget:m})=>u("div",{onClick:()=>m(n),className:T(A.unitItem,{[A.current]:i,[A.target]:o,[A.topTeam]:s==="TOP_TEAM",[A.bottomTeam]:s==="BOTTOM_TEAM"}),children:[r(j,{unitTeam:s,gameRound:1,name:n.getName(),isOrder:!1,isDead:e,isParalyzing:a,isDefending:t}),r(De,{isDead:e,name:n.getName(),hp:n.getHealth(),startHp:n.getMaxHealth(),damageValue:n.getDamageValue(),unitDamageType:n.getUnitType()})]}),qe="_boardContainer_1w2cr_1",Ge="_boardRow_1w2cr_15";var G={boardContainer:qe,boardRow:Ge};const $e=({initialUnits:n,units:e,currentUnit:t,toSelectTarget:a,action:i,handleSelectTarget:o})=>{const[s,m]=f.exports.useState();return f.exports.useEffect(()=>{t&&m(i.getPossibleTargetsOfUnit(t))},[t]),r("div",{className:G.boardContainer,children:n.map((c,d)=>r("div",{className:G.boardRow,children:c.map((h,b)=>r(Re,{unitTeam:d>Math.floor(c.length/2)?"BOTTOM_TEAM":"TOP_TEAM",unit:h,isDead:Boolean(!e[d][b]),isDefending:Boolean(h==null?void 0:h.getIsDefending()),isParalyzing:Boolean(h==null?void 0:h.getIsParalyzed()),isCurrent:h===t,isTarget:a&&(s==null?void 0:s.findIndex(_=>_===e[d][b]))!==-1,handleSelectTarget:o},b))},d))})};class L{getPossibleTargets(e,t){const a=t.getEnemiesLocation(e);if(a.length)return a;const i=t.getTeamOfUnits(e);if(i&&i===t.getTeamOfNextLine(e))return[];const o=t.getNearestEnemiesLocation(e);return o||[]}}class U{getTargets(e,t){return t&&e.findIndex(a=>a.rowIndex===t.rowIndex&&a.columnIndex===t.columnIndex)!==-1?[t]:[]}}class I{constructor(e,t,a,i,o,s,m){g(this,"name");g(this,"health");g(this,"maxHealth");g(this,"damageValue");g(this,"initiative");g(this,"originInitiative");g(this,"isDefending");g(this,"isParalyzed");g(this,"unitType");g(this,"attackRangeType");g(this,"damageCount");this.name=e||"",this.health=t||0,this.maxHealth=t||0,this.damageValue=a||0,this.initiative=i||0,this.originInitiative=i||0,this.isDefending=!1,this.isParalyzed=!1,this.unitType=o||new x,this.attackRangeType=s||new L,this.damageCount=m||new U}getPossibleTargets(e,t){return this.attackRangeType.getPossibleTargets(e,t)}getTargets(e,t,a){return this.damageCount.getTargets(this.getPossibleTargets(e,t),a)}deal(e,t,a=void 0){return this.unitType.deal(this,this.getTargets(e,t,a),t)}getName(){return this.name}getHealth(){return this.health}getMaxHealth(){return this.maxHealth}getDamageValue(){return this.damageValue}getInitiative(){return this.initiative}getOriginInitiative(){return this.originInitiative}getIsDefending(){return this.isDefending}getIsParalyzed(){return this.isParalyzed}getUnitType(){return this.unitType}getDamageCount(){return this.damageCount}setHealth(e){this.health=e}setInitiative(e){this.initiative=e}setIsDefending(e){this.isDefending=e}setIsParalyzed(e){this.isParalyzed=e}}class Fe extends I{constructor(){super("Skeleton",100,25,50,new x,new L,new U)}}class We extends I{constructor(){super("Centaur",150,50,50,new x,new L,new U)}}class Ke extends I{constructor(){super("Bandit",75,30,60,new x,new L,new U)}}class w{getPossibleTargets(e,t){const a=t.getUnitByLocation(e);return a&&a.getUnitType()instanceof k?t.getAllAlliesLocation(e):t.getAllEnemiesLocation(e)}}class Ye extends I{constructor(){super("Elf Archer",90,45,60,new x,new w,new U)}}class N{getTargets(e){return e}}class Je extends I{constructor(){super("Skeleton Mage",50,20,40,new x,new w,new N)}}class Qe extends I{constructor(){super("Archimage",90,30,40,new x,new w,new N)}}class Xe extends I{constructor(){super("Monk",90,40,20,new k,new w,new U)}}class Ze extends I{constructor(){super("Bishop",130,25,20,new k,new w,new N)}}class et extends I{constructor(){super("Sirena",80,0,20,new R,new w,new U)}}class tt{constructor(){g(this,"unitList");this.unitList=[Fe,We,Ke,Ye,Je,Qe,Xe,Ze,et]}shuffleListSequance(e){for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}generateIndex(){return Math.floor(Math.random()*this.unitList.length)}generateUnit(){return new this.unitList[this.generateIndex()]}generateFullBoardUnits(e,t){const a=[];for(let i=0;i<e;i++){const o=[];for(let s=0;s<t;s++)o.push(this.generateUnit());a.push(o)}return a}}class nt{constructor(e,t){g(this,"boardMatrix");const a=Array(t).fill(null);this.boardMatrix=Array(e).fill(a)}getBoardMatrix(){return this.boardMatrix}setUnit(e,t){this.boardMatrix[e.rowIndex][e.columnIndex]=t}fillWithUnits(e){this.boardMatrix=[...e]}}var p;(function(n){n.topTeam="TOP_TEAM",n.bottomTeam="BOTTOM_TEAM"})(p||(p={}));var C;(function(n){n.attack="ATTACK",n.defense="DEFFENSE"})(C||(C={}));class at{constructor(e){g(this,"board");this.board=e}getUnitCardLocation(e){let t=0,a=0,i=!1;return this.board.getBoardMatrix().every(o=>{const s=o.findIndex(m=>m===e);if(s===-1)t+=1;else return i=!0,a=s,!1;return!0}),i?{rowIndex:t,columnIndex:a}:null}getUnitByLocation(e){return e?this.board.getBoardMatrix()[e.rowIndex][e.columnIndex]:null}isAlive(e){return Boolean(this.board.getBoardMatrix()[e.rowIndex][e.columnIndex])}removeDeadUnits(e){return e!=null}getTeamOfUnits(e){if(e)return e.rowIndex<Math.floor(this.board.getBoardMatrix().length/2)?p.topTeam:p.bottomTeam}getEnemiesLocation(e){const t=this.getTeamOfUnits(e),a=t===p.topTeam?1:-1,i=[],o={rowIndex:e.rowIndex+a,columnIndex:e.columnIndex},s=this.getTeamOfUnits({rowIndex:e.rowIndex+a,columnIndex:e.columnIndex})!==t,m=e.columnIndex-1>=0&&s,c=e.columnIndex+1<this.board.getBoardMatrix().length&&s;s&&this.isAlive(o)&&i.push(o);const d={rowIndex:e.rowIndex+a,columnIndex:e.columnIndex-1},h={rowIndex:e.rowIndex+a,columnIndex:e.columnIndex+1};return s&&m&&this.isAlive(d)&&i.push(d),s&&c&&this.isAlive(h)&&i.push(h),i}getRowEnemiesLocation(e){return this.board.getBoardMatrix()[e].filter(t=>t&&t.getHealth()>0).map(t=>{const a=this.getUnitCardLocation(t);return a||null})}getTeamOfNextLine(e){const a=this.getTeamOfUnits(e)===p.topTeam?1:-1;return this.getRowEnemiesLocation(e.rowIndex+a).length===0?null:this.getTeamOfUnits({rowIndex:e.rowIndex+a,columnIndex:e.columnIndex})}getNearestEnemiesLocation(e){const t=this.board.getBoardMatrix(),a=this.getTeamOfUnits(e),i=Math.floor(t.length/2);if(a===p.bottomTeam){for(let o=i-1;o>=0;o-=1)if(t[o].filter(s=>s).length)return this.getRowEnemiesLocation(o).filter(this.removeDeadUnits)}else for(let o=i;o<t.length;o+=1)if(t[o].filter(s=>s).length)return this.getRowEnemiesLocation(o).filter(this.removeDeadUnits);return null}switchTeam(e){return e===p.bottomTeam?p.topTeam:p.bottomTeam}getAllTeamUnits(e,t=!1){const a=this.board.getBoardMatrix(),i=this.getTeamOfUnits(e),o=t?this.switchTeam(i):i,s=Math.floor(a.length/2),m=[];if(o===p.bottomTeam){for(let c=s-1;c>=0;c-=1)for(let d=0;d<a[c].length;d+=1)if(a[c][d]){const h=this.getUnitCardLocation(a[c][d]);h&&m.push(h)}}else for(let c=s;c<a.length;c+=1)for(let d=0;d<a[c].length;d+=1)if(a[c][d]){const h=this.getUnitCardLocation(a[c][d]);h&&m.push(h)}return m}getAllEnemiesLocation(e){return this.getAllTeamUnits(e)}getAllAlliesLocation(e){return this.getAllTeamUnits(e,!0)}}class it{constructor(e,t,a){g(this,"location");g(this,"board");g(this,"unitGenerator");this.location=e,this.board=t,this.unitGenerator=a}doAction(e,t,a){switch(e){case C.attack:const i=this.deal(t);!(t.getDamageCount()instanceof N)&&i&&a&&i(a),this.unitGenerator.next();break;case C.defense:this.defense(t),this.unitGenerator.next();break;default:throw new Error("There is no such an action")}}killUnit(e){this.board.setUnit(e,null)}checkAndRemoveDeadUnits(e){e.forEach(t=>{const a=this.location.getUnitByLocation(t);a&&a.getHealth()<=0&&this.killUnit(t)})}attackSingleTarget(e,t){const a=this.location.getUnitCardLocation(e);a&&e.deal(a,this.location,t)}attackAllTargets(e){const t=this.location.getUnitCardLocation(e);e.deal(t,this.location)}deal(e){const t=this.location.getUnitCardLocation(e);if(t&&e.getDamageCount()instanceof U)return a=>{this.attackSingleTarget(e,a),this.checkAndRemoveDeadUnits(this.location.getAllEnemiesLocation(this.location.getUnitCardLocation(e)))};t&&e.getDamageCount()instanceof N&&(this.attackAllTargets(e),this.checkAndRemoveDeadUnits(this.location.getAllEnemiesLocation(this.location.getUnitCardLocation(e))))}defense(e){e.setIsDefending(!0)}getPossibleTargetsOfUnit(e){return e.getPossibleTargets(this.location.getUnitCardLocation(e),this.location).map(t=>this.location.getUnitByLocation(t))}getBoardLocationOfTarget(e){return this.location.getUnitCardLocation(e)}getTeamOfUnit(e){return this.location.getTeamOfUnits(this.location.getUnitCardLocation(e))}}class st{constructor(e,t){g(this,"unitList");g(this,"unitGenerator");g(this,"currentUnit");g(this,"round");this.unitList=this.splitByEqualInitiative(e.filter(a=>a)).reduce((a,i)=>[...a,...t.shuffleListSequance(i)]),this.unitGenerator=this.generator(),this.round=1,this.currentUnit=this.unitList[0]}*generator(){for(;;)yield*this.unitList,this.round++}skipCurrentUnit(){return!this.currentUnit||this.currentUnit.getHealth()<=0||this.currentUnit.getInitiative()<=0}getFilterCondition(e){return e&&e.getHealth()>0&&e.getInitiative()>0}next(){var e;for(this.currentUnit=this.unitGenerator.next().value;((e=this.currentUnit)==null?void 0:e.getInitiative())<=0;)this.clearCurrentUnitParalyzation(),this.currentUnit=this.unitGenerator.next().value;for(;this.skipCurrentUnit();)this.currentUnit=this.unitGenerator.next().value;return this.currentUnit===this.unitList.filter(this.getFilterCondition)[0]&&this.removeDefending(),this.currentUnit}getUnitList(){return this.unitList.filter(e=>this.getFilterCondition(e))}getCurrentUnit(){return this.currentUnit}splitByEqualInitiative(e){const t=this.sortByInitiativeUnitsList(e),a=[];let i=[];for(let o=t.length-1;o>=0;o-=1)o!==t.length-1&&t[o].getInitiative()!==t[o+1].getInitiative()&&(a.push(i),i=[]),i.push(t[o]),o===0&&a.push(i);return a}clearCurrentUnitParalyzation(){this.currentUnit.setInitiative(this.currentUnit.getOriginInitiative()),this.currentUnit.setIsParalyzed(!1)}removeDefending(){this.unitList.filter(e=>e&&e.getHealth()>0).forEach(e=>{e.setIsDefending(!1)})}sortByInitiativeUnitsList(e){const t=[];return e.forEach(a=>{a.forEach(i=>{t.push(i)})}),t.sort((a,i)=>a.getInitiative()-i.getInitiative())}getGameRound(){return this.round}}class B{static start(e,t){const a=new tt,i=new nt(e,t);i.fillWithUnits(a.generateFullBoardUnits(e,t)),this.location=new at(i);const o=i.getBoardMatrix();this.unitGenerator=new st(o,a);const s=new it(this.location,i,this.unitGenerator);return{units:o,unitGenerator:this.unitGenerator,action:s}}static finish(e){return{isFinished:!this.location.getAllEnemiesLocation(this.location.getUnitCardLocation(e)).some(t=>this.location.isAlive(t)),currentTeam:this.location.getTeamOfUnits(this.location.getUnitCardLocation(e))}}}g(B,"location"),g(B,"unitGenerator");const ot="_gameOverContainer_1j0t4_1",rt="_bottomTeam_1j0t4_53",lt="_topTeam_1j0t4_61";var D={gameOverContainer:ot,bottomTeam:rt,topTeam:lt};const ct=({currentTeam:n,handleNewGame:e})=>u("div",{className:D.gameOverContainer,children:[r("span",{children:"Game Over"}),u("span",{children:["The winner is"," ",r("span",{className:T({[D.bottomTeam]:n===p.bottomTeam,[D.topTeam]:n===p.topTeam}),children:n===p.bottomTeam?"Bottom team":"Top team"})]}),r("button",{onClick:()=>e(),children:"New game"})]}),mt="_orderContainer_ntizx_1",gt="_orderItem_ntizx_23",ht="_topTeam_ntizx_47",ut="_bottomTeam_ntizx_55";var $={orderContainer:mt,orderItem:gt,topTeam:ht,bottomTeam:ut};const dt=4,ft=3,pt=12,Tt=({gameRound:n,action:e,currentUnit:t,unitSequence:a})=>{const[i,o]=f.exports.useState(a);return f.exports.useEffect(()=>{const s=a.findIndex(m=>m===t);s!==-1&&o([a[s],...[...a.slice(s+1),...a.slice(0,s)].slice(0,pt+1)])},[t]),r("div",{className:$.orderContainer,children:i.map((s,m)=>r("div",{className:$.orderItem,children:r(j,{gameRound:n,unitTeam:e.getTeamOfUnit(s),isOrder:!0,name:s.getName()})},m))})},It="_turnControllerContainer_ty334_1",_t="_attackButton_ty334_13",xt="_damageIcon_ty334_47",Ut="_defenseButton_ty334_59";var E={turnControllerContainer:It,attackButton:_t,damageIcon:xt,defenseButton:Ut};const bt=({toSelectTarget:n,setToSelectTarget:e,handleDefense:t,handleAttack:a})=>u("div",{className:E.turnControllerContainer,children:[u("button",{onClick:()=>a(),className:E.attackButton,children:["Attack",r("img",{className:E.damageIcon,src:"https://img.icons8.com/external-flat-icons-inmotus-design/67/fa314a/external-ancien-ancient-rome-flat-icons-inmotus-design.png"})]}),u("button",{className:E.defenseButton,onClick:()=>t(),children:["Defense",r("img",{className:E.damageIcon,src:"https://img.icons8.com/external-icongeek26-flat-icongeek26/64/fa314a/external-weapons-museum-icongeek26-flat-icongeek26.png"})]})]}),vt="_sideBarContainer_j1qk0_1";var Ct={sideBarContainer:vt};const yt=({action:n,toSelectTarget:e,setToSelectTarget:t,currentUnit:a,unitGenerator:i,handleDefense:o,handleAttack:s,gameRound:m})=>a?u("div",{className:Ct.sideBarContainer,children:[r(Tt,{gameRound:m,action:n,currentUnit:a,unitSequence:i.getUnitList().filter(c=>c)}),r(bt,{toSelectTarget:e,setToSelectTarget:t,handleDefense:o,handleAttack:s})]}):null,wt="_appContainer_pa11e_1";var Nt={appContainer:wt};let F;function Mt(){const[n,e]=f.exports.useState(),[t,a]=f.exports.useState(),[i,o]=f.exports.useState(),[s,m]=f.exports.useState(!1),[c,d]=f.exports.useState(),[h,b]=f.exports.useState(1),[_,V]=f.exports.useState(),[H,W]=f.exports.useState(!1);function K(){console.log("Stae"),W(!H),V(B.finish(c))}function Y(v){if(c&&(i==null?void 0:i.getPossibleTargetsOfUnit(c).findIndex(X=>X===v))===-1)return;const O=i==null?void 0:i.getBoardLocationOfTarget(v);i==null||i.doAction(C.attack,c,O),m(!1),b(h+1)}function J(){m(!s),(c==null?void 0:c.getDamageCount())instanceof N&&(i==null||i.doAction(C.attack,c),m(!1),b(h+1))}function Q(){i==null||i.doAction(C.defense,c),b(h+1),m(!1)}return f.exports.useEffect(()=>{const v=B.start(dt,ft);e(v.units),a(v.unitGenerator),o(v.action),F=[...v.units.map(O=>[...O])]},[H]),f.exports.useEffect(()=>{d(t==null?void 0:t.next())},[t]),f.exports.useEffect(()=>{c&&V(B.finish(c)),d(t==null?void 0:t.getCurrentUnit())},[h]),n?r("div",{className:Nt.appContainer,children:(_==null?void 0:_.isFinished)?r(ct,{currentTeam:_==null?void 0:_.currentTeam,handleNewGame:K}):u(me,{children:[r($e,{units:n,initialUnits:F,toSelectTarget:s,handleSelectTarget:Y,currentUnit:c,action:i}),r(yt,{action:i,unitGenerator:t,toSelectTarget:s,setToSelectTarget:m,currentUnit:c,handleDefense:Q,handleAttack:J,gameRound:t==null?void 0:t.getGameRound()})]})}):r("div",{children:"Loading"})}te.render(r(ne.StrictMode,{children:r(Mt,{})}),document.getElementById("root"));
